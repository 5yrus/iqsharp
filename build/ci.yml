name: $(Build.Major).$(Build.Minor).$(date:yyMM).$(DayOfMonth)$(rev:rr)
trigger:
- master

variables:
  Build.Major: 0
  Build.Minor: 9
  Drops.Dir: $(Build.ArtifactStagingDirectory)/drops

jobs:
- job: "iqsharp"
  pool:
    vmImage: ubuntu-16.04
  steps:
  - template: steps.yml
    parameters:
      onlyConda: "false"
  - task: ms.vss-governance-buildtask.governance-build-task-component-detection.ComponentGovernanceComponentDetection@0
    displayName: 'Component Detection'
    inputs:
      failOnAlert: true

- job: "pack-conda-macos"
  pool:
    vmImage: macOS-10.14
  steps:
  - template: steps.yml
    parameters:
      onlyConda: "true"
  - task: ms.vss-governance-buildtask.governance-build-task-component-detection.ComponentGovernanceComponentDetection@0
    displayName: 'Component Detection'
    inputs:
      failOnAlert: true

- job: "pack-conda-win"
  pool:
    vmImage: windows-2019
  steps:
  - template: steps.yml
    parameters:
      onlyConda: "true"
  - task: ms.vss-governance-buildtask.governance-build-task-component-detection.ComponentGovernanceComponentDetection@0
    displayName: 'Component Detection'
    inputs:
      failOnAlert: true
